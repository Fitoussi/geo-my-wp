function gmwSetCookie(a,c,h){var k=new Date;k.setTime(k.getTime()+864E5*h);c=escape(encodeURIComponent(c))+(null==h?"":"; expires="+k.toUTCString());document.cookie=a+"="+c+"; path=/"}function gmwGetCookie(a){return(a=document.cookie.match("(^|;) ?"+a+"=([^;]*)(;|$)"))?decodeURIComponent(a[2]):null}function gmwDeleteCookie(a){document.cookie=encodeURIComponent(a)+"=deleted; expires="+(new Date(0)).toUTCString()}
function GmwAutoLocator(a,c){function h(b){(new google.maps.Geocoder).geocode({latLng:new google.maps.LatLng(b.coords.latitude,b.coords.longitude)},function(b,l){if(l==google.maps.GeocoderStatus.OK)return e={status:"success",results:b},a(e);e={status:"falied",type:"2",message:l};return c(e)})}function k(a){var g;switch(a.code){case a.PERMISSION_DENIED:g="User denied the request for Geolocation.";break;case a.POSITION_UNAVAILABLE:g="Location information is unavailable.";break;case 3:g="The request to get user location timed out.";
break;case a.UNKNOWN_ERROR:g="An unknown error occurred"}e={status:"failed",type:"3",message:g};return c(e)}var e=!1;if(navigator.geolocation)navigator.geolocation.getCurrentPosition(h,k,{timeout:1E4});else return e={status:"failed",type:"1",message:"Sorry! Geolocation is not supported by this browser."},c(e)}function gmwAddressGeocoder(a,c,h){geocoder=new google.maps.Geocoder;geocoder.geocode({address:a.address,region:a.region},function(a,e){return e==google.maps.GeocoderStatus.OK?c(a):h(e)})}
jQuery(document).ready(function(a){function c(a){k(a.results)}function h(b){2==b.type?alert("Geocoder failed due to: "+b.message):alert(b.message);0!=g&&a("#gmw-locator-btn-loader-"+g).fadeToggle("fast",function(){a(".locator-submitted").fadeToggle("fast").removeClass("locator-submitted");a(".gmw-address").removeAttr("disabled");a(".gmw-submit").removeAttr("disabled")})}function k(l){var m="",f="",c="",h="",k="",q="",d=l[0].address_components,n=l[0].geometry.location.lat(),p=l[0].geometry.location.lng();
gmwSetCookie("gmw_lat",n,7);gmwSetCookie("gmw_lng",p,7);gmwSetCookie("gmw_address",l[0].formatted_address,7);0!=b&&(b.find(".gmw-lat").val(n),b.find(".gmw-lng").val(p));for(x in d)"street_number"==d[x].types&&(m=d[x].long_name,gmwSetCookie("gmw_street_number",m,7)),"route"==d[x].types&&(street_name=d[x].long_name,gmwSetCookie("gmw_street_name",street_name,7),f=0!=m&&""!=m?m+" "+street_name:street_name,gmwSetCookie("gmw_street",f,7)),"administrative_area_level_1,political"==d[x].types&&(h=d[x].short_name,
gmwSetCookie("gmw_state",d[x].short_name,7),gmwSetCookie("gmw_state_long",d[x].long_name,7)),"locality,political"==d[x].types&&(c=d[x].short_name,gmwSetCookie("gmw_city",d[x].short_name,7)),"postal_code"==d[x].types&&(k=d[x].short_name,gmwSetCookie("gmw_zipcode",d[x].short_name,7)),"country,political"==d[x].types&&(q=d[x].short_name,gmwSetCookie("gmw_country",d[x].short_name,7),gmwSetCookie("gmw_country_long",d[x].long_name,7));1==e&&location.reload();a(".locator-submitted")[0]&&(a(".gmw-address").removeAttr("disabled"),
a(".gmw-submit").removeAttr("disabled"),b.find(".gmw-address").hasClass("gmw-full-address")?b.find(".gmw-full-address").val(l[0].formatted_address):(b.find(".gmw-saf-street").val(f),b.find(".gmw-saf-city").val(c),b.find(".gmw-saf-state").val(h),b.find(".gmw-saf-zipcode").val(k),b.find(".gmw-saf-country").val(q)),b.find(".gmw-submit").toggleClass("submitted"),b.find(".gmw-lat").val(n),b.find(".gmw-lng").val(p),a("#"+g).hasClass("gmw-locator-submit")?setTimeout(function(){a(".gmw-locator-btn-loader-"+
g).fadeToggle("fast",function(){locatorButton.fadeToggle("fast")});b.find(".gmw-submit").click()},1500):a("#gmw-locator-btn-loader-"+g).fadeToggle("fast",function(){a(".locator-submitted").fadeToggle("fast").removeClass("locator-submitted")}))}a(".gmw-map-loader").fadeOut(1500);jQuery().chosen&&a(".gmw-chosen").chosen();navigator.geolocation||a(".gmw-locator-btn-wrapper").hide();a(".gmw-address").focus(function(){a(this).hasClass("gmw-no-address-error")&&a(this).removeClass("gmw-no-address-error")});
a(".gmw-submit").click(function(b){a(b.target).is("input")||a(this).closest("form").submit()});a(".gmw-form input[type='text']").keyup(function(b){13==b.keyCode&&a(this).closest("form").submit()});a(".gmw-address").keyup(function(){a(this).closest("form").find(".gmw-lat").val("");a(this).closest("form").find(".gmw-lng").val("")});a(".gmw-per-page").change(function(){thisValue=a(this).val();ppValues=a(this).next();formID=ppValues.attr("formid");totalResults=ppValues.attr("totalcount");paged=ppValues.attr("paged");
pageName=ppValues.attr("pageName");urlPx=ppValues.attr("urlpx");gmwPost=ppValues.attr("gmwpost");lastPage=Math.ceil(totalResults/thisValue);newPaged=paged>lastPage||1==lastPage?lastPage:paged;window.location.href=0==gmwPost?window.location.href+"?"+urlPx+"auto=auto&"+urlPx+"per_page="+thisValue+"&"+urlPx+"form="+formID+"&"+pageName+"="+newPaged:location.href.replace(/([?&]gmw_per_page)=([^#&]*)/g,"$1="+thisValue).replace(/([?/]page[?/])([^#/]*)/g,"$1"+newPaged)});a(".gmw-form").submit(function(b){var c,
f=a(this);f.find(".gmw-paged").val("1");f.find(".gmw-address").hasClass("gmw-full-address")?c=f.find(".gmw-full-address").val():(c=[],f.find(".gmw-address").each(function(){c.push(a(this).val())}),c=c.join(" "));if(!a.trim(c).length){var e=f.find(".gmw-address");if(e.hasClass("mandatory"))return e.hasClass("gmw-no-address-error")||e.toggleClass("gmw-no-address-error"),!1;f.find(".gmw-submit").addClass("submitted")}if(1==gmwSettings.general_settings.js_geocode){if(""!=f.find(".gmw-lat").val()&&""!=
f.find(".gmw-lng").val()||f.find(".gmw-submit").hasClass("submitted"))return!0;b.preventDefault();geocoder=new google.maps.Geocoder;countryCode=gmwSettings.general_settings.country_code;geocoder.geocode({address:c,region:countryCode},function(a,b){b==google.maps.GeocoderStatus.OK?(f.find(".gmw-submit").addClass("submitted"),f.find(".gmw-lat").val(a[0].geometry.location.lat()),f.find(".gmw-lng").val(a[0].geometry.location.lng()),setTimeout(function(){f.submit()},500)):alert("We could not find the address you entered for the following reason: "+
b)})}else return!0});var e=!1,b=!1,g=!1;1==gmwSettings.general_settings.auto_locate&&1!=gmwGetCookie("gmw_autolocate")&&(gmwSetCookie("gmw_autolocate",1,1),e=!0,GmwAutoLocator(c,h));a(".gmw-locate-btn").click(function(){g=a(this).closest("form").find(".gmw-form-id").val();locatorButton=a(this);b=a(this).closest("form");b.find(".gmw-lat").val("");b.find(".gmw-lng").val("");a(this).toggleClass("locator-submitted");locatorButton.fadeToggle("fast",function(){a("#gmw-locator-btn-loader-"+g).fadeToggle("fast",
function(){a(".gmw-address").attr("disabled","disabled");a(".gmw-submit").attr("disabled","disabled");GmwAutoLocator(c,h)})})})});