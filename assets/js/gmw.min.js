var GMW={options:gmwSettings,hooks:{action:{},filter:{}},map_elements:{},navigator_timeout:1e4,autocomplete_fields:void 0!==typeof gmwAutocompleteFields?{}:gmwAutocompleteFields,navigator_error_messages:{1:"User denied the request for Geolocation.",2:"Location information is unavailable.",3:"The request to get user location timed out.",4:"An unknown error occurred"},auto_locator:{status:!1,type:!1,callback:!1},locator_button:{status:!1,element:!1,id:!1,loader:!1,submit:!1},form_submission:{status:!1,form:!1,id:!1,submit:!1},init:function(){GMW.add_action("gmw_init"),jQuery(".gmw-map-loader").fadeOut(1500),jQuery(".gmw-form-wrapper").length&&GMW.form_functions(),navigator.geolocation&&1==GMW.options.general_settings.auto_locate&&1!=GMW.get_cookie("gmw_autolocate")&&(GMW.set_cookie("gmw_autolocate",1,1),GMW.auto_locator("page_locator",GMW.page_locator_success,!1)),jQuery(".gmw-address-autocomplete").each(function(){jQuery(this).is("[id]")&&GMW.address_autocomplete(jQuery(this).attr("id"),jQuery(this).data())}),"undefined"!=typeof jQuery.ui&&jQuery.ui.draggable&&GMW.draggable_element(),GMW.toggle_element(),GMW.rangeslider(),GMW.date_picker()},add_action:function(e,o,t,s){GMW.add_hook("action",e,o,t,s)},add_filter:function(e,o,t,s){GMW.add_hook("filter",e,o,t,s)},do_action:function(e){GMW.do_hook("action",e,arguments)},apply_filters:function(e){return GMW.do_hook("filter",e,arguments)},remove_action:function(e,o){GMW.remove_hook("action",e,o)},remove_filter:function(e,o,t){GMW.remove_hook("filter",e,o,t)},add_hook:function(e,o,t,s,a){void 0==GMW.hooks[e][o]&&(GMW.hooks[e][o]=[]);var r=GMW.hooks[e][o];void 0==a&&(a=o+"_"+r.length),void 0==s&&(s=10),GMW.hooks[e][o].push({tag:a,callable:t,priority:s})},do_hook:function(e,o,t){if(t=Array.prototype.slice.call(t,1),void 0!=GMW.hooks[e][o]){var s,a=GMW.hooks[e][o];a.sort(function(e,o){return e.priority-o.priority});for(var r=0;r<a.length;r++)s=a[r].callable,"function"!=typeof s&&(s=window[s]),"action"==e?s.apply(null,t):t[0]=s.apply(null,t)}return"filter"==e?t[0]:void 0},remove_hook:function(e,o,t,s){if(void 0!=GMW.hooks[e][o])for(var a=GMW.hooks[e][o],r=a.length-1;r>=0;r--)void 0!=s&&s!=a[r].tag||void 0!=t&&t!=a[r].priority||a.splice(r,1)},set_cookie:function(e,o,t){var s=new Date;s.setTime(s.getTime()+24*t*60*60*1e3);var a=escape(encodeURIComponent(o))+(null==t?"":"; expires="+s.toUTCString());document.cookie=e+"="+a+"; path=/"},get_cookie:function(e){var o=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return o?decodeURIComponent(o[2]):null},delete_cookie:function(e){document.cookie=encodeURIComponent(name_name)+"=deleted; expires="+new Date(0).toUTCString()},navigator:function(e,o){function t(t){GMW.geocoder([t.coords.latitude,t.coords.longitude],e,o)}function s(e){return o(GMW.navigator_error_messages[e.code])}return navigator.geolocation?void navigator.geolocation.getCurrentPosition(t,s,{timeout:GMW.navigator_timeout}):o("Sorry! Geolocation is not supported by this browser.")},geocoder:function(e,o,t){countryCode=void 0!=GMW.options.general_settings.country_code?GMW.options.general_settings.country_code:"us","object"==typeof e?data={latLng:new google.maps.LatLng(e[0],e[1]),region:countryCode}:data={address:e,region:countryCode},geocoder=new google.maps.Geocoder,geocoder.geocode(data,function(e,s){return s==google.maps.GeocoderStatus.OK?void 0!=o?o(e):GMW.geocoder_success(e):void 0!=t?t(s):GMW.geocoder_failed(s)})},geocoder_success:function(){},geocoder_failed:function(e){alert("We could not find the address you entered for the following reason: "+e)},address_autocomplete:function(e,o){var t=document.getElementById(e);if(null!=t){var s={};"undefined"!=typeof o.autocomplete_countries&&(s.componentRestrictions={country:o.autocomplete_countries.split(",")}),"undefined"!=typeof o.autocomplete_types&&(s.types=[o.autocomplete_types]),s=GMW.apply_filters("gmw_address_autocomplete_options",s,e,t,GMW);var a=new google.maps.places.Autocomplete(t,s);google.maps.event.addListener(a,"place_changed",function(){var o=a.getPlace();if(GMW.do_action("gmw_address_autocomplete_place_changed",o,a,e,t,s),o.geometry){var r=jQuery("#"+e).closest("form");if(r.attr("data-form_id"))var n=r.data("form_id");else{if(!r.find(".gmw-form-id").length)return;var n=r.find(".gmw-form-id").val()}1==o.address_components.length&&"country"==o.address_components[0].types[0]?jQuery("#gmw-country-"+n).val(o.address_components[0].short_name).prop("disabled",!1):2==o.address_components.length&&"administrative_area_level_1"==o.address_components[0].types[0]&&(jQuery("#gmw-state-"+n).val(o.address_components[0].long_name).prop("disabled",!1),jQuery("#gmw-country-"+n).val(o.address_components[1].short_name).prop("disabled",!1)),jQuery("#gmw-lat-"+n).val(o.geometry.location.lat().toFixed(6)),jQuery("#gmw-lng-"+n).val(o.geometry.location.lng().toFixed(6))}})}},save_location_fields:function(e){latitude=e[0].geometry.location.lat().toFixed(6),longitude=e[0].geometry.location.lng().toFixed(6),address_fields={street_number:"",street_name:"",street:"",premise:"",neighborhood:"",city:"",region_code:"",region_name:"",country:"",postcode:"",country_code:"",country_name:"",address:e[0].formatted_address,formatted_address:e[0].formatted_address,lat:latitude,lng:longitude},GMW.set_cookie("gmw_ul_lat",latitude,7),jQuery("#gmw_cl_lat").val(latitude),GMW.set_cookie("gmw_ul_lng",longitude,7),jQuery("#gmw_cl_lng").val(longitude),GMW.set_cookie("gmw_ul_address",e[0].formatted_address,7),jQuery("#gmw_cl_address").val(e[0].formatted_address),GMW.set_cookie("gmw_ul_formatted_address",e[0].formatted_address,7),jQuery("#gmw_cl_formatted_address").val(e[0].formatted_address),address=e[0].address_components,GMW.do_action("gmw_save_location_fields",e);for(x in address)"street_number"==address[x].types&&void 0!=address[x].long_name&&(address_fields.street_number=address[x].long_name,jQuery("#gmw_cl_street_number").val(address_fields.street_number)),"route"==address[x].types&&void 0!=address[x].long_name&&(address_fields.street_name=address[x].long_name,jQuery("#gmw_cl_street_name").val(address_fields.street_name),""!=address_fields.street_number?address_fields.street=address_fields.street_number+" "+address_fields.street_name:address_fields.street=address_fields.street_name,GMW.set_cookie("gmw_ul_street",address_fields.street,7),jQuery("#gmw_cl_street").val(address_fields.street)),"subpremise"==address[x].types&&void 0!=address[x].long_name&&(address_fields.premise=address[x].long_name,jQuery("#gmw_cl_premise").val(address[x].long_name)),"neighborhood,political"==address[x].types&&void 0!=address[x].long_name&&(address_fields.neighborhood=address[x].long_name,jQuery("#gmw_cl_neighborhood").val(address[x].long_name)),"locality,political"==address[x].types&&void 0!=address[x].long_name&&(address_fields.city=address[x].long_name,GMW.set_cookie("gmw_ul_city",address[x].long_name,7),jQuery("#gmw_cl_city").val(address[x].long_name)),"administrative_area_level_1,political"==address[x].types&&(address_fields.region_name=address[x].long_name,address_fields.region_code=address[x].short_name,GMW.set_cookie("gmw_ul_region_name",address[x].long_name,7),GMW.set_cookie("gmw_ul_region_code",address[x].short_name,7),jQuery("#gmw_cl_region_code").val(address[x].short_name),jQuery("#gmw_cl_region_name").val(address[x].long_name)),"administrative_area_level_2,political"==address[x].types&&void 0!=address[x].long_name&&(address_fields.county=address[x].long_name,jQuery("#gmw_cl_county").val(address[x].long_name)),"postal_code"==address[x].types&&void 0!=address[x].long_name&&(address_fields.postcode=address[x].long_name,GMW.set_cookie("gmw_ul_postcode",address[x].short_name,7),jQuery("#gmw_cl_postcode").val(address[x].long_name)),"country,political"==address[x].types&&(address_fields.country_name=address[x].long_name,address_fields.country_code=address[x].short_name,GMW.set_cookie("gmw_ul_country_name",address[x].long_name,7),GMW.set_cookie("gmw_ul_country_code",address[x].short_name,7),jQuery("#gmw_cl_country_code").val(address[x].short_name),jQuery("#gmw_cl_country_name").val(address[x].long_name)),GMW.do_action("gmw_save_location_field",address[x],e);return address_fields},auto_locator:function(e,o,t){GMW.auto_locator.status=!0,GMW.auto_locator.type=e,GMW.auto_locator.success=o,GMW.auto_locator.failed=t,GMW.navigator(GMW.auto_locator_success,GMW.auto_locator_failed)},auto_locator_success:function(e){address_fields=GMW.save_location_fields(e),0!=GMW.auto_locator.success?GMW.auto_locator.success(address_fields,e):(GMW.auto_locator.status=!1,GMW.auto_locator.type=!1,GMW.auto_locator.success=!1,GMW.auto_locator.failed=!1)},auto_locator_failed:function(e){0!=GMW.auto_locator.failed?GMW.auto_locator.failed(e):(alert(e),GMW.auto_locator.status=!1,GMW.auto_locator.type=!1,GMW.auto_locator.success=!1,GMW.auto_locator.failed=!1)},page_locator_success:function(e,o){GMW.auto_locator.status=!1,GMW.auto_locator.callback=!1,GMW.auto_locator.type=!1,setTimeout(function(){jQuery("#gmw-current-location-form").submit()},500)},form_functions:function(){GMW.enable_smartbox(),navigator.geolocation||jQuery(".gmw-locator-btn-wrapper").hide(),jQuery(".gmw-address").focus(function(){jQuery(this).removeClass("gmw-no-address-error")}),jQuery(".gmw-address").keyup(function(e){if(13!=e.which){var o=jQuery(this).closest("form");if(o.attr("data-form_id"))var t=o.data("form_id");else var t=o.find(".gmw-form-id").val();jQuery("#gmw-lat-"+t).val(""),jQuery("#gmw-lng-"+t).val(""),jQuery("#gmw-state-"+t).val("").prop("disabled",!0),jQuery("#gmw-country-"+t).val("").prop("disabled",!0)}}),jQuery(".gmw-locator-button").click(function(){GMW.locator_button(jQuery(this))}),jQuery(".gmw-form").submit(function(e){GMW.form_submission(jQuery(this),e)})},enable_smartbox:function(){jQuery().chosen&&jQuery(".gmw-smartbox").chosen({width:"100%"}),jQuery().select2&&jQuery(".gmw-smartbox").select2()},form_submission:function(e,o){if(GMW.form_submission.status=!0,GMW.form_submission.form=e,GMW.form_submission.id=GMW.form_submission.form.find(".gmw-form-id").val(),1==GMW.form_submission.submit)return!0;if(o.preventDefault(),jQuery(".gmw-paged-"+GMW.form_submission.id).val("1"),GMW.form_submission.form.find(".gmw-address").hasClass("gmw-full-address")?address=jQuery("#gmw-address-field-"+GMW.form_submission.id).val():(address=[],GMW.form_submission.form.find(".gmw-address").each(function(){address.push(jQuery(this).val())}),address=address.join(" ")),!jQuery.trim(address).length){var t=GMW.form_submission.form.find(".gmw-address");return t.hasClass("mandatory")?(t.hasClass("gmw-no-address-error")||t.toggleClass("gmw-no-address-error"),!1):(GMW.form_submission.submit=!0,GMW.form_submission.form.submit(),!1)}return 1!=GMW.options.general_settings.js_geocode?(GMW.form_submission.submit=!0,GMW.form_submission.form.submit(),!1):""!=jQuery("#gmw-lat-"+GMW.form_submission.id).val()&&""!=jQuery("#gmw-lng-"+GMW.form_submission.id).val()?(GMW.form_submission.submit=!0,GMW.form_submission.form.submit(),!1):void GMW.geocoder(address,GMW.form_geocoder_success,GMW.geocoder_failed)},form_geocoder_success:function(e){return 1==e[0].address_components.length&&"country"==e[0].address_components[0].types[0]?jQuery("#gmw-country-"+GMW.form_submission.id).val(e[0].address_components[0].short_name).prop("disabled",!1):2==e[0].address_components.length&&"administrative_area_level_1"==e[0].address_components[0].types[0]&&(jQuery("#gmw-state-"+GMW.form_submission.id).val(e[0].address_components[0].long_name).prop("disabled",!1),jQuery("#gmw-country-"+GMW.form_submission.id).val(e[0].address_components[1].short_name).prop("disabled",!1)),jQuery("#gmw-lat-"+GMW.form_submission.id).val(e[0].geometry.location.lat().toFixed(6)),jQuery("#gmw-lng-"+GMW.form_submission.id).val(e[0].geometry.location.lng().toFixed(6)),setTimeout(function(){GMW.form_submission.submit=!0,GMW.form_submission.form.submit()},500),!1},locator_button:function(e){GMW.locator_button.status=!0,GMW.locator_button.element=e,GMW.locator_button.form_id=e.data("form_id"),GMW.locator_button.loader=e.next(),GMW.locator_button.submit=1==e.attr("data-locator_submit")?!0:!1,jQuery("#gmw-lat-"+GMW.locator_button.form_id).val(""),jQuery("#gmw-lng-"+GMW.locator_button.form_id).val(""),jQuery("#gmw-state-"+GMW.locator_button.form_id).val("").val("").prop("disabled",!0),jQuery("#gmw-country-"+GMW.locator_button.form_id).val("").val("").prop("disabled",!0),e.hasClass("inside")?e.addClass("animate-spin"):e.hasClass("text")?GMW.locator_button.loader.fadeIn("fast"):GMW.locator_button.element.fadeOut("fast",function(){GMW.locator_button.loader.fadeIn("fast")}),setTimeout(function(){jQuery('.gmw-form input[type="text"]').attr("disabled","disabled"),jQuery(".gmw-submit").attr("disabled","disabled"),GMW.auto_locator("locator_button",GMW.locator_button_success,GMW.locator_button_failed)},500)},locator_button_success:function(e,o){jQuery('.gmw-form input[type="text"]').removeAttr("disabled"),jQuery(".gmw-submit").removeAttr("disabled"),jQuery("#gmw-lat-"+GMW.locator_button.form_id).val(o[0].geometry.location.lat().toFixed(6)),jQuery("#gmw-lng-"+GMW.locator_button.form_id).val(o[0].geometry.location.lng().toFixed(6)),jQuery("#gmw-address-field-"+GMW.locator_button.form_id).hasClass("gmw-full-address")?jQuery("#gmw-address-field-"+GMW.locator_button.form_id).val(e.formatted_address):(jQuery("#gmw-form-"+ +GMW.locator_button.form_id).find(".gmw-saf-street").val(e.street),jQuery("#gmw-form-"+ +GMW.locator_button.form_id).find(".gmw-saf-city").val(e.city),jQuery("#gmw-form-"+ +GMW.locator_button.form_id).find(".gmw-saf-state").val(e.region_name),jQuery("#gmw-form-"+ +GMW.locator_button.form_id).find(".gmw-saf-zipcode").val(e.postcode),jQuery("#gmw-form-"+ +GMW.locator_button.form_id).find(".gmw-saf-country").val(e.country_code)),GMW.locator_button.submit?setTimeout(function(){jQuery("#gmw-submit-"+GMW.locator_button.form_id).click()},500):GMW.locator_button_done()},locator_button_failed:function(e){alert("Geocoder failed due to: "+e),GMW.locator_button_done()},locator_button_done:function(){jQuery('.gmw-form input[type="text"]').removeAttr("disabled"),jQuery(".gmw-submit").removeAttr("disabled"),GMW.locator_button.element.hasClass("inside")?GMW.locator_button.element.removeClass("animate-spin"):GMW.locator_button.loader.fadeOut("fast",function(){GMW.locator_button.element.fadeIn("fast")}),setTimeout(function(){GMW.locator_button.status=!1,GMW.locator_button.element=!1,GMW.locator_button.form_id=!1,GMW.locator_button.loader=!1,GMW.locator_button.submit=!1},500)},rangeslider:function(){jQuery(".gmw-range-slider").on("input change",function(){jQuery(this).next("span").find("output").html(jQuery(this).val())})},date_picker:function(){var e=jQuery(".gmw-date-field"),o=jQuery(".gmw-time-field");e.length>0&&"undefined"!=typeof jQuery.fn.pickadate&&e.each(function(){var e=jQuery(this).data("date_type");jQuery(this).pickadate({format:e||"yyyy/mm/dd"})}),o.length>0&&"undefined"!=typeof jQuery.fn.pickatime&&o.each(function(){jQuery(this).pickatime({interval:1})})},draggable_element:function(){jQuery(document).on("mouseenter",".gmw-draggable",function(e){if(!jQuery(this).hasClass("enabled")){jQuery(this).addClass("enabled");var o=jQuery(this).data();jQuery("#"+o.draggable).draggable({containment:o.containment,handle:jQuery(this)})}})},toggle_element:function(){jQuery(document).on("click",".gmw-element-toggle-button",function(e){var o=jQuery(this),t=jQuery(this).data(),s=jQuery(t.target),a={};o.toggleClass(t.show_icon).toggleClass(t.hide_icon),o.hasClass("visible")?(a[t.animation]=t.close_length,s.addClass("hidden")):(a[t.animation]=t.open_length,s.removeClass("hidden")),s.animate(a,t.duration,function(){o.toggleClass("visible hidden")})})}};jQuery(document).ready(function(e){0==gmwIsAdmin&&GMW.init()});