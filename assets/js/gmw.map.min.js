var GMW_Map_Providers={};"google_maps"==gmwVars.mapsProvider&&(GMW_Map_Providers.google_maps={latLngBounds:function(o){return new google.maps.LatLngBounds},getBounds:function(o){return void 0===o&&(o=this),{southWest:{lat:o.map.getBounds().getSouthWest().lat(),lng:o.map.getBounds().getSouthWest().lng()},northEast:{lat:o.map.getBounds().getNorthEast().lat(),lng:o.map.getBounds().getNorthEast().lng()}}},clearMarker:function(o,e){o.setMap(null)},polyline:function(o,e){return new google.maps.Polyline(o)},clearPolyline:function(o,e){o.setMap(null)},latLng:function(o,e,n){return new google.maps.LatLng(o,e)},addMarker:function(o,e){o.setMap(e.map)},renderUserInfoWindow:function(o,e,n){var t=n;t.userInfoWindow=new google.maps.InfoWindow({content:e,ariaLabel:"gmw-user-iw"}),google.maps.event.addListener(o,"click",(function(){t.userInfoWindow.open(t.map,o)})),1==t.userLocation.iw_open&&setTimeout((function(){t.userInfoWindow.open(t.map,t.userMarker)}),500)},resizeMap:function(o,e){void 0===e&&(o=(e=this).map),google.maps.event.trigger(o,"resize")},setCenter:function(o,e){e.map.setCenter(o)},getPosition:function(o,e){return gmwVars.googleAdvancedMarkers?o.position:o.getPosition()},getMapOptions:function(o){var e={};if(e.center=new google.maps.LatLng(o.options.defaultCenter[0],o.options.defaultCenter[1]),e.mapTypeId=google.maps.MapTypeId[o.options.mapTypeId],e.mapTypeControlOptions={style:google.maps.MapTypeControlStyle.DROPDOWN_MENU,position:google.maps.ControlPosition.LEFT_TOP},e.zoomControlOptions={position:google.maps.ControlPosition.RIGHT_CENTER},e.streetViewControlOptions={position:google.maps.ControlPosition.RIGHT_CENTER},0!=o.settings.map_bounderies.length){var n=new google.maps.LatLngBounds(new google.maps.LatLng(o.settings.map_bounderies[0],o.settings.map_bounderies[1]),new google.maps.LatLng(o.settings.map_bounderies[2],o.settings.map_bounderies[3]));e.restriction={latLngBounds:n,strictBounds:!0}}return e},Map:function(o,e,n){return new google.maps.Map(document.getElementById(n.mapElement),e)},mapLoaded:function(o){var e=o;google.maps.event.addListenerOnce(e.map,"idle",(function(){if(e.wrapElement.find(".gmw-map-loader").fadeOut(500),e.options.resizeMapControl&&0!=jQuery("#gmw-resize-map-toggle-"+e.id).length){var o=document.getElementById("gmw-resize-map-toggle-"+e.id);o.style.position="absolute",e.map.controls[google.maps.ControlPosition.TOP_RIGHT].push(o),o.style.display="block",e.fullScreenToggle()}if(0!=jQuery("#gmw-map-position-filter-wrapper-"+e.id).length){var n=document.getElementById("gmw-map-position-filter-wrapper-"+e.id);e.map.controls[google.maps.ControlPosition.TOP_CENTER].push(n),n.style.display="",n.style.position="absolute"}google.maps.event.addListener(e.map,"click",(function(o){e.closeInfoWindow()})),google.maps.event.addListener(e.map,"zoom_changed",(function(o){e.zoomChanged(e)})),google.maps.event.addListener(e.map,"bounds_changed",(function(o){e.boundsChanged(e)})),google.maps.event.addListener(e.map,"dragend",(function(){e.dragged(e)})),e.renderUserMarker(),e.renderMarkers(e.locations,!1),GMW.do_action("gmw_map_loaded",e.map,e)}))},renderMarker:function(o,e,n){var t=n;if(gmwVars.googleAdvancedMarkers){var i=document.createElement("img"),a=o.icon||t.iconUrl,r=[],s={position:o.position,map:t.map,title:e.title||""};e.icon_size?r=[parseInt(e.icon_size[0]),parseInt(e.icon_size[1])]:(t.iconSize||a==gmwVars.defaultIcons.location_icon_url)&&(t.iconScaledSize||(t.iconSize?t.iconScaledSize=[parseInt(t.iconSize[0]),parseInt(t.iconSize[1])]:t.iconScaledSize=[parseInt(gmwVars.defaultIcons.location_icon_size[0]),parseInt(gmwVars.defaultIcons.location_icon_size[1])]),r=t.iconScaledSize),i.src=a,0!=r.length&&(i.width=r[0],i.height=r[1]),void 0!==e.object_id&&(i.id="gmw-map-icon-"+e.object_id,i.className="gmw-map-icon-object-"+e.object_id,void 0!==e.location_id&&(i.id+="-"+e.location_id,i.className+=" gmw-map-icon-location-"+e.location_id)),s.content=i;var l={markerCount:o.id,locationID:e.location_id||0,iwContent:o.content,objectType:e.object_type||"",objectId:e.object_id||0,iconUrl:a,bounceEvent:e.bounce_event||"disabled",openIwEvent:e.open_iw_event||"disabled",scrollToItem:e.scroll_to_item||"disabled"};s=GMW.apply_filters("gmw_generate_marker_options",s,o.id,t,e);var c=new google.maps.marker.AdvancedMarkerElement(s)}else{var p={url:o.icon||t.iconUrl};e.icon_size?p.scaledSize=new google.maps.Size(parseInt(e.icon_size[0]),parseInt(e.icon_size[1])):(t.iconSize||p.url==gmwVars.defaultIcons.location_icon_url)&&(t.iconScaledSize||(t.iconSize?t.iconScaledSize=new google.maps.Size(parseInt(t.iconSize[0]),parseInt(t.iconSize[1])):t.iconScaledSize=new google.maps.Size(parseInt(gmwVars.defaultIcons.location_icon_size[0]),parseInt(gmwVars.defaultIcons.location_icon_size[1]))),p.scaledSize=t.iconScaledSize);s={position:o.position,icon:p,map:t.map,animation:null,title:"gmw-map-icon"},l={markerCount:o.id,locationID:e.location_id||0,iwContent:o.content,objectType:e.object_type||"",objectId:e.object_id||0,iconUrl:p.url,bounceEvent:e.bounce_event||"disabled",openIwEvent:e.open_iw_event||"disabled",scrollToItem:e.scroll_to_item||"disabled"};s=GMW.apply_filters("gmw_generate_marker_options",s,o.id,t,e);c=new google.maps.Marker(s)}return c.gmwData=l,c.addListener("mouseover",(function(){t.markerEvents("mouseover",c)})),c.addListener("mouseout",(function(){t.markerEvents("mouseout",c)})),c.addListener("click",(function(){t.markerEvents("click",c)})),gmwVars.googleAdvancedMarkers?"hover"==l.bounceEvent||GMW.apply_filters("gmw_bounce_marker_on_result_hover",!1,c,t)?jQuery(".gmw-object-"+c.gmwData.objectId).hover((function(){c.content.classList.add("gmw-marker-bounce")}),(function(){c.content.classList.remove("gmw-marker-bounce")})):"click"==l.bounceEvent&&(jQuery(".gmw-object-"+c.gmwData.objectId).click((function(){c.content.classList.add("gmw-marker-bounce")})),jQuery(".gmw-object-"+c.gmwData.objectId).mouseout((function(){c.content.classList.remove("gmw-marker-bounce")}))):"hover"==l.bounceEvent||GMW.apply_filters("gmw_bounce_marker_on_result_hover",!1,c,t)?jQuery(".gmw-object-"+c.gmwData.objectId).hover((function(){c.setAnimation(google.maps.Animation.BOUNCE)}),(function(){c.setAnimation(null)})):"click"==l.bounceEvent&&(jQuery(".gmw-object-"+c.gmwData.objectId).click((function(){c.setAnimation(google.maps.Animation.BOUNCE)})),jQuery(".gmw-object-"+c.gmwData.objectId).mouseout((function(){c.setAnimation(null)}))),jQuery(document).on("mouseenter mouseleave click",".gmw-object-"+c.gmwData.objectId,(function(o){t.resultItemEvents(o.type,jQuery(this),c)})),c},setMarkerPosition:function(o,e,n){o.setPosition(e)},moveMarker:function(o,e){var n=this,t=360/n.locations.length,i=o.lat()+-25e-6*Math.cos(+t*e/180*Math.PI),a=o.lng()+-25e-6*Math.sin(+t*e/180*Math.PI),r=n.latLng(i,a);return n.polylines.push(new google.maps.Polyline({path:[o,r],strokeColor:"#999999",strokeOpacity:1,strokeWeight:1,map:n.map})),r},markerGroupingTypes:{standard:{init:function(o){},addMarker:function(o,e){o.setMap(e.map)},markerClick:function(o,e){google.maps.event.addListener(o,"click",(function(){e.markerClick(this)}))}}},infoWindowTypes:{standard:{open:function(o,e){var n=e;if(o.gmwData.iwContent){var t=GMW.apply_filters("gmw_standard_info_window_options",{content:'<div class="gmw-element-wrapper gmw-standard-info-window gmw-info-window standard map-'+n.id+" "+n.prefix+'">'+o.gmwData.iwContent+"</div>",ariaLabel:"gmw-location-iw"},n);n.activeInfoWindow=new google.maps.InfoWindow(t),n.activeInfoWindow.open(n.map,o)}},close:function(o){o.activeInfoWindow&&(o.activeInfoWindow.close(),o.activeInfoWindow=null)}}}}),"leaflet"==gmwVars.mapsProvider&&(L.Map.include({_initControlPos:function(){var o=this._controlCorners={},e="leaflet-",n=this._controlContainer=L.DomUtil.create("div",e+"control-container",this._container);function t(t,i){var a=e+t+" "+e+i;o[t+i]=L.DomUtil.create("div",a,n)}t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right"),t("top","center"),t("middle","center"),t("middle","left"),t("middle","right"),t("bottom","center")}}),GMW_Map_Providers.leaflet={latLngBounds:function(o){return L.latLngBounds()},getBounds:function(o){void 0===o&&(o=this);var e=o.map.getBounds();return{southWest:{lat:e._southWest.lat,lng:e._southWest.lng},northEast:{lat:e._northEast.lat,lng:e._northEast.lng}}},clearMarker:function(o,e){o.remove()},polyline:function(o,e){return L.polygon(o.path,{color:o.strokeColor}).addTo(e)},clearPolyline:function(o,e){e.map.removeLayer(o)},latLng:function(o,e,n){return L.latLng(o,e)},addMarker:function(o,e){o.addTo(e.map)},renderUserInfoWindow:function(o,e,n){var t=GMW.apply_filters("gmw_user_info_window_options",{content:e,maxWidth:"auto",minWidth:250,className:"gmw-user-iw"},self);self.userInfoWindow=L.popup(t).setContent(t.content),o.bindPopup(self.userInfoWindow),1==n.userLocation.iw_open&&setTimeout((function(){o.openPopup()}),500)},resizeMap:function(o,e){void 0===e&&(o=(e=this).map),o.invalidateSize()},setCenter:function(o,e){e.map.setView(o)},getPosition:function(o,e){return o.getLatLng()},getMapOptions:function(o){var e={markerClustersOptions:{spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,removeOutsideVisibleBounds:!0,animate:!0},markerSpiderfierOptions:{keepSpiderfied:!0,nearbyDistance:20,circleSpiralSwitchover:9,legWeight:1.5}};if(e.scrollWheelZoom=o.options.scrollwheel,0!=o.settings.map_bounderies.length){var n=L.latLng(o.settings.map_bounderies[0],o.settings.map_bounderies[1]),t=L.latLng(o.settings.map_bounderies[2],o.settings.map_bounderies[3]);e.maxBounds=L.latLngBounds(n,t)}return e},moveMarker:function(o,e){var n=this,t=360/n.locations.length,i=o.lat+-5e-5*Math.cos(+t*e/180*Math.PI),a=o.lng+-5e-5*Math.sin(+t*e/180*Math.PI),r=n.latLng(i,a);return n.polylines.push(L.polygon([r,o],{color:"#999999",wight:"1"}).addTo(n.map)),r},Map:function(o,e,n){return L.map(o,e)},mapLoaded:function(o){var e=o;e.map.on("load",(function(){e.wrapElement.find(".gmw-map-loader").fadeOut(500),e.options.resizeMapControl&&0!=jQuery("#gmw-resize-map-toggle-"+e.id).length&&(jQuery("#gmw-resize-map-toggle-"+e.id).detach().appendTo(jQuery("#"+e.mapElement).find(".leaflet-top.leaflet-right")).addClass("leaflet-control leaflet-bar").show(),e.fullScreenToggle()),0!=jQuery("#gmw-map-position-filter-wrapper-"+e.id).length&&jQuery("#gmw-map-position-filter-wrapper-"+e.id).detach().appendTo(jQuery("#"+e.mapElement).find(".leaflet-top.leaflet-center")).addClass("leaflet-control leaflet-bar").show(),e.map.on("click dblclick,",(function(o){e.closeInfoWindow()})),e.map.on("zoomend",(function(o){e.zoomChanged(e)})),e.map.on("dragend",(function(o){e.dragged(e)})),e.renderUserMarker(),e.renderMarkers(e.locations,!1),GMW.do_action("gmw_map_loaded",e.map,e)})),e.map.setView(e.options.defaultCenter),void 0!==e.map.zoomControl&&e.map.zoomControl.setPosition("bottomright"),L.tileLayer(e.options.layersUrl,{attribution:e.options.layersAttribution}).addTo(e.map)},renderMarker:function(o,e,n){var t=n,i=o.icon||t.iconUrl,a=e.icon_size||t.iconSize||[25,41],r={iconOptions:{iconUrl:i,iconSize:a,iconAnchor:[a[0]/2,a[1]],popupAnchor:[1,-a[1]]},position:o.position,location_id:o.id,iw_content:o.content},s={markerCount:o.id,locationID:e.location_id||0,iwContent:o.content,objectType:e.object_type||"",objectId:e.object_id||0,bounceEvent:e.bounce_event||"disabled",openIwEvent:e.open_iw_event||"disabled",scrollToItem:e.scroll_to_item||"disabled"};(r=GMW.apply_filters("gmw_generate_marker_options",r,o.id,o,this)).icon=L.icon(r.iconOptions);var l=L.marker([o.position.lat,o.position.lng],r);return l.gmwData=s,jQuery(document).on("mouseenter mouseleave click",".gmw-object-"+l.gmwData.objectId,(function(o){t.resultItemEvents(o.type,jQuery(this),l)})),l.on("mouseover mouseout click",(function(o){t.markerEvents(o.type,l)})),l},setMarkerPosition:function(o,e,n){o.setLatLng(e)},markerGroupingTypes:{standard:{init:function(o){},addMarker:function(o,e){o.addTo(e.map)},markerClick:function(o,e){o.on("click",(function(){e.markerClick(this)}))},clear:function(){}}},infoWindowTypes:{standard:{open:function(o,e){var n=e;if(o.gmwData.iwContent){var t=GMW.apply_filters("gmw_standard_info_window_options",{content:'<div class="gmw-element-wrapper gmw-standard-info-window gmw-info-window standard map-'+n.id+" "+n.prefix+'">'+o.gmwData.iwContent+"</div>",maxWidth:"auto",minWidth:250,className:"gmw-location-iw"},n);n.activeInfoWindow=L.popup(t).setContent(t.content),o.unbindPopup().bindPopup(n.activeInfoWindow).openPopup()}},close:function(o){o.activeInfoWindow&&(o.activeInfoWindow=null)}}}});var GMW_Maps={},GMW_Map=function(o,e,n){this.id=o.map_id,this.prefix=o.prefix,this.settings=o,this.provider=o.map_provider||"leaflet",this.gmw_form=n||!1,this.wrapElement=jQuery("#gmw-map-wrapper-"+this.id),this.mapElement="gmw-map-"+this.id,this.options=e||{zoom:8,mapTypeId:"ROADMAP"},this.map=!1,this.locations=[],this.previousLocations=[],this.markers=[],this.hideMapWithoutLocations=o.hide_no_locations||!1,this.activeInfoWindow=null,this.userLocation=!1,this.userPosition=!1,this.userInfoWindow=!1,this.clustersPath=o.clusters_path||"https://raw.githubusercontent.com/googlemaps/js-marker-clusterer/gh-pages/images/m",this.markerGrouping=o.group_markers||"standard",this.infoWindow=o.info_window_type||"standard",this.infoWindowAjax=o.info_window_ajax||!1,this.infoWindowTemplate=o.info_window_template||"default",this.userMarker=!1,this.clusters=!1,this.bounds=!1,this.activeMarker=null,this.polylines=[],this.autoZoomLevel=!1,this.zoomPosition=o.zoom_position||!1,this.iconUrl=o.icon_url||gmwVars.defaultIcons.location_icon_url,this.iconSize=o.icon_size||null,this.userIconSize=gmwVars.defaultIcons.user_location_icon_size,this.directions=null,this.coordsCollector=[],this.moveMarkerEnabled=!1,this.init()};function gmwInitMaps(){setTimeout((function(){jQuery.each(gmwMapObjects,(function(o,e){e.settings.render_on_page_load&&(GMW_Maps[o]=new GMW_Map(e.settings,e.map_options,e.form),GMW_Maps[o].render(e.locations,e.user_location))}))}),500)}GMW_Map.prototype.markerGroupingTypes={},GMW_Map.prototype.infoWindowTypes={},GMW_Map.prototype.init=function(){var o=this;if(void 0===GMW_Map_Providers[o.provider])return console.log("The map provider "+o.provider+" not exists.");jQuery.extend(o,GMW_Map_Providers[o.provider]),void 0===(o=GMW.apply_filters("gmw_map_init",o)).markerGroupingTypes[o.markerGrouping]&&(console.log(o.markerGrouping+' marker grouping function was not found. "Standard" will be used instead'),o.markerGrouping="standard"),void 0===o.infoWindowTypes[o.infoWindow]&&(console.log(o.infoWindow+' info-window function was not found. "Standard" will be used instead'),o.infoWindow="standard"),"google_maps"==o.provider?"standard"!=o.markerGrouping&&"markers_clusterer"!=o.markerGrouping||(o.moveMarkersEnabled=!0):"leaflet"==o.provider&&"standard"==o.markerGrouping&&(o.moveMarkersEnabled=!0)},GMW_Map.prototype.centerMap=function(){var o=this;if(0==o.zoomPosition||o.autoZoomLevel)1==o.locations.length&&0==o.userPosition?(o.map.panTo(o.getPosition(o.markers[0],o)),setTimeout((function(){o.autoZoomLevel?o.map.setZoom(13):o.map.setZoom(parseInt(o.options.zoom))}),300)):o.autoZoomLevel||0==o.userPosition?(o.autoZoomLevel||0==o.userPosition)&&o.map.fitBounds(o.bounds):(o.map.setZoom(parseInt(o.options.zoom)),o.map.panTo(o.userPosition));else{var e=o.latLng(o.zoomPosition.lat,o.zoomPosition.lng,o);o.map.setZoom(parseInt(o.options.zoom)),o.map.panTo(e)}},GMW_Map.prototype.fullScreenToggle=function(o){var e=this;jQuery("#gmw-resize-map-toggle-"+e.id).on("click",(function(){var o=e.map.getCenter();e.wrapElement.toggleClass("gmw-expanded-map"),e.wrapElement.hasClass("gmw-expanded-map")?jQuery("body, html").addClass("gmw-scroll-disabled"):jQuery("body, html").removeClass("gmw-scroll-disabled"),jQuery(this).toggleClass("gmw-icon-resize-full").toggleClass("gmw-icon-resize-small"),setTimeout((function(){e.resizeMap(e.map,e),e.setCenter(o,e)}),100)}))},GMW_Map.prototype.render=function(o,e){var n,t=this;(Array.isArray(o)||(o=Object.keys(o).map((function(e){return o[e]}))),jQuery("#"+t.mapElement).length)&&(t.locations=o||t.locations,t.userLocation=e||t.userLocation,t.bounds=t.latLngBounds(t),"auto"==t.options.zoom?(t.autoZoomLevel=!0,t.options.zoom=13):(t.autoZoomLevel=!1,t.options.zoom=parseInt(t.options.zoom)),t.options.defaultCenter=void 0!==t.options.defaultCenter?t.options.defaultCenter.split(","):[40.758895,-73.985131],t.options=jQuery.extend({},t.options,t.getMapOptions(t)),t.options=GMW.apply_filters("gmw_map_options",t.options,t),n=0==t.locations.length&&t.hideMapWithoutLocations?"slideUp":"slideDown",t.wrapElement[n]("fast",(function(){t.map=t.Map(t.mapElement,t.options,t),GMW.do_action("gmw_map_rendered",t.map,t),t.mapLoaded(t)})))},GMW_Map.prototype.dragged=function(o){GMW.do_action("gmw_map_dragged",o.map,o),GMW.do_action("gmw_map_position_changed",o.map,o)},GMW_Map.prototype.zoomChanged=function(o){GMW.do_action("gmw_map_zoom_changed",o.map,o),GMW.do_action("gmw_map_position_changed",o.map,o)},GMW_Map.prototype.boundsChanged=function(o){GMW.do_action("gmw_map_bounds_changed",o.map,o)},GMW_Map.prototype.update=function(o,e,n){var t=this;Array.isArray(o)||(o=Object.keys(o).map((function(e){return o[e]}))),t.locations=o||t.locations,t.userLocation=e||t.userLocation,0==t.locations.length&&t.hideMapWithoutLocations?this.wrapElement.slideUp():!1!==t.map?(t.bounds=t.latLngBounds(),t.closeInfoWindow(),t.wrapElement.slideDown("fast",(function(){t.resizeMap(t.map,t),t.clear(),t.clearUserMarker(),t.renderUserMarker(),t.renderMarkers(t.locations,n)}))):t.render(t.locations,t.userLocation)},GMW_Map.prototype.clear=function(){for(var o=this,e=0;e<o.markers.length+1;e++)e<o.markers.length?o.markers[e]&&o.clearMarker(o.markers[e],o):(this.clearPolylines(),o.markers=[],o.coordsCollector=[],this.clearMarkersGrouping())},GMW_Map.prototype.clearPolylines=function(){for(var o=this,e=0;e<o.polylines.length+1;e++)e<this.polylines.length?o.clearPolyline(o.polylines[e],o):o.polylines=[]},GMW_Map.prototype.renderUserMarker=function(){var o=this;if(0!=o.userLocation&&"null"!=o.userLocation.lat&&"null"!=o.userLocation.lng&&0!=o.userLocation.lat&&0!=o.userLocation.lng&&"0"!=o.userLocation.map_icon&&""!=o.userLocation.map_icon){o.userPosition=o.latLng(o.userLocation.lat,o.userLocation.lng,o),o.bounds.extend(o.userPosition),void 0!==o.userLocation.map_icon&&""!=o.userLocation.map_icon||(o.userLocation.map_icon=gmwVars.defaultIcons.user_location_icon_url),!o.userLocation.icon_size&&(o.userLocation.map_icon==gmwVars.defaultIcons.user_location_icon_url||o.userLocation.map_icon.indexOf("defaultUserMarker")>-1)&&(o.userLocation.icon_size=o.userIconSize);var e={position:o.userPosition,icon:o.userLocation.map_icon,id:"user_marker",content:""};if(o.userMarker=o.renderMarker(e,o.userLocation,o),o.addMarker(o.userMarker,o),0!=o.userLocation.iw_content&&null!=o.userLocation.iw_content){var n='<div class="gmw-info-window user-marker map-'+o.id+" "+o.prefix+'"><span class="title">'+o.userLocation.iw_content+"</span></div>";o.renderUserInfoWindow(o.userMarker,n,o)}}},GMW_Map.prototype.clearUserMarker=function(){var o=this;0!=o.userMarker&&(o.clearMarker(o.userMarker,o),o.userMarker=!1,o.userPosition=!1)},GMW_Map.prototype.renderMarkers=function(o,e){var n=this;Array.isArray(o)||(o=Object.keys(o).map((e=>o[e]))),GMW.do_action("gmw_map_pre_render_markers",o,this),n.initMarkersGrouping(),n.locations=o,n.previousLocations=e?[...n.locations,...n.previousLocations]:n.locations;var t=n.locations.length;0===t&&n.hideMapWithoutLocations&&this.wrapElement.slideUp();for(var i=[],a=0;a<t;a++)if(n.locations[a].lat&&n.locations[a].lng&&"0.000000"!==n.locations[a].lat&&"0.000000"!==n.locations[a].lng){var r=n.latLng(n.locations[a].lat,n.locations[a].lng,n);if(n.moveMarkersEnabled){var s=n.locations[a].lat+n.locations[a].lng;n.coordsCollector.includes(s)?r=n.moveMarker(r,a):n.coordsCollector.push(s)}n.bounds.extend(r);var l={position:r,icon:n.locations[a].map_icon||gmwVars.defaultIcons.location_icon_url,id:a,content:n.locations[a].info_window_content},c=n.renderMarker(l,n.locations[a],n);n.addMarker(c,n),i.push(c),n.markerGroupingTypes[n.markerGrouping].markerClick(c,n),GMW.do_action("gmw_map_markers_loop_single_marker",c,n.locations[a],n)}"markers_clusterer"===n.markerGrouping&&i.length>0&&("leaflet"===n.provider?n.clusters.addLayers(i):n.clusters.addMarkers(i,n)),GMW.do_action("gmw_map_after_render_markers",o,this),!n.disableMapCente&&(t>0||n.userMarker)&&(GMW.apply_filters("gmw_map_disable_map_center",!1,n)||n.centerMap())},GMW_Map.prototype.renderMarkers_legacy=function(o,e){var n=this;Array.isArray(o)||(o=Object.keys(o).map((function(e){return o[e]}))),GMW.do_action("gmw_map_pre_render_markers",o,this),n.initMarkersGrouping(),n.locations=o,e&&0!=n.previousLocations.length?(temLoc=jQuery.merge(n.locations,n.previousLocations),n.previousLocations=n.locations,n.locations=temLoc):n.previousLocations=n.locations;var t=n.locations.length;0==t&&n.hideMapWithoutLocations&&this.wrapElement.slideUp();for(var i=0;i<t+1;i++)if(i<t){if(null==n.locations[i].lat||null==n.locations[i].lng||"0.000000"==n.locations[i].lat||"0.000000"==n.locations[i].lng)continue;var a=n.latLng(n.locations[i].lat,n.locations[i].lng,n);if(n.moveMarkersEnabled){var r=n.locations[i].lat+n.locations[i].lng;-1!=jQuery.inArray(r,n.coordsCollector)?a=n.moveMarker(a,i):n.coordsCollector.push(r)}n.bounds.extend(a),void 0!==n.locations[i].map_icon&&""!=n.locations[i].map_icon||(n.userLocation.map_icon=gmwVars.defaultIcons.location_icon_url);var s={position:a,icon:n.locations[i].map_icon,id:i,content:n.locations[i].info_window_content};n.markers[i]=n.renderMarker(s,n.locations[i],n),n.markerGroupingTypes[n.markerGrouping].addMarker(n.markers[i],n),n.markerGroupingTypes[n.markerGrouping].markerClick(n.markers[i],n),GMW.do_action("gmw_map_markers_loop_single_marker",n.markers[i],n.locations[i],n)}else GMW.do_action("gmw_map_after_render_markers",o,this),!n.disableMapCente&&(t>0||0!=n.userMarker)&&(GMW.apply_filters("gmw_map_disable_map_center",!1,n)||n.centerMap())},GMW_Map.prototype.initMarkersGrouping=function(){var o=this;"normal"==o.markerGrouping&&(o.markerGrouping="standard"),GMW.do_action("gmw_markers_grouping_init",o.markerGrouping,o),o.markerGroupingTypes[o.markerGrouping].init(o)},GMW_Map.prototype.clearMarkersGrouping=function(){var o=this;"normal"==o.markerGrouping&&(o.markerGrouping="standard"),GMW.do_action("gmw_markers_grouping_clear",o.markerGrouping,o),void 0!==o.markerGroupingTypes[o.markerGrouping].clear&&o.markerGroupingTypes[o.markerGrouping].clear(o)},GMW_Map.prototype.openInfoWindow=function(o){var e=this;e.activeMarker=o,GMW.do_action("gmw_map_pre_open_info_window",o,e),e.closeInfoWindow(),e.infoWindowTypes[e.infoWindow].open(o,e)},GMW_Map.prototype.closeInfoWindow=function(){var o=this;"function"==typeof o.userInfoWindow.close&&o.userInfoWindow.close(),GMW.do_action("gmw_map_pre_close_info_window",o.infoWindow,o),o.infoWindowTypes[o.infoWindow].close(o)},GMW_Map.prototype.markerClick=function(o){var e=this;GMW.do_action("gmw_map_marker_click",o,e),e.activeMarker=o,e.openInfoWindow(o)},GMW_Map.prototype.markerEvents=function(o,e){if("disabled"!=e.gmwData.scrollToItem){var n=e.gmwData,t=n.scrollToItem,i=jQuery("#gmw-single-"+n.objectType+"-"+n.objectId),a=i.closest(".gmw-results-list");if(i.length){function r(o,e){var n;(n=e[0]).scrollHeight>n.clientHeight?e.animate({scrollTop:e.scrollTop()+o.position().top},{duration:"medium",easing:"swing"}).promise().done((function(){o.removeClass("item-scrolling")})):jQuery("html, body").animate({scrollTop:o.offset().top-jQuery(window).height()/2},{duration:"medium",easing:"swing"}).promise().done((function(){o.removeClass("item-scrolling")}))}"mouseover"===o?(i.addClass("marker-hover"),"hover"===t&&(i.addClass("item-scrolling"),r(i,a))):"click"===o?"click"===t&&(i.addClass("item-scrolling"),r(i,a)):"mouseout"===o&&i.removeClass("marker-hover")}GMW.do_action("gmw_map_marker_"+o+"_event",e)}},GMW_Map.prototype.getIwTemplateName=function(o){return o.indexOf("custom_")>-1&&(o=o.replace("custom_","")+" custom"),o},GMW_Map.prototype.resultItemEvents=function(o,e,n){var t=this;"mouseenter"==o?"hover"==n.gmwData.openIwEvent&&t.openInfoWindow(n):"mouseleave"==o?"hover"==n.gmwData.openIwEvent&&t.closeInfoWindow():"click"==o&&"click"==n.gmwData.openIwEvent&&(t.clusters&&"function"==typeof t.clusters.zoomToShowLayer?t.clusters.zoomToShowLayer(n,(function(){t.setCenter(t.getPosition(n,t),t),t.openInfoWindow(n)})):t.openInfoWindow(n)),GMW.do_action("gmw_map_result_item_"+o+"_event",e,n)},jQuery(document).ready((function(o){"undefined"!=typeof gmwMapObjects&&function o(e=10,n=100){if("google_maps"===gmwVars.mapsProvider){if(0===e)return void console.error("Google Maps API failed to load.");if(window.google&&window.google.maps&&google.maps.importLibrary)if(gmwVars.googleAdvancedMarkers){!async function(){await google.maps.importLibrary("marker"),gmwInitMaps()}()}else gmwInitMaps();else console.log(`Google Maps not loaded, retrying in ${n}ms...)`),setTimeout((()=>o(e-1,n)),n)}else gmwInitMaps()}()}));